#!/bin/bash
#
# Pre-commit hook that checks for uncommitted changes
# Install this hook by running: git config core.hooksPath .githooks
#

# Colors for output
RED='\033[0;31m'
YELLOW='\033[1;33m'
GREEN='\033[0;32m'
NC='\033[0m' # No Color

# Check if there are uncommitted changes (excluding staged changes)
if git diff --quiet && git diff --cached --quiet; then
    # No changes to commit
    echo -e "${YELLOW}Warning: No changes detected${NC}"
else
    # There are changes - this is expected for a commit
    echo -e "${GREEN}âœ“ Changes detected, proceeding with commit...${NC}"
fi

# Check for untracked files that might need to be added
UNTRACKED=$(git ls-files --others --exclude-standard)
if [ -n "$UNTRACKED" ]; then
    echo -e "${YELLOW}Warning: Untracked files detected:${NC}"
    echo "$UNTRACKED" | sed 's/^/  /'
    echo ""
    read -p "Do you want to continue with the commit? (y/n) " -n 1 -r
    echo
    if [[ ! $REPLY =~ ^[Yy]$ ]]; then
        echo -e "${RED}Commit aborted${NC}"
        exit 1
    fi
fi

# All checks passed
exit 0
